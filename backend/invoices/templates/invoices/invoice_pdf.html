<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
        @page {
            size: a4 portrait;
            margin: 1cm;
        }

        @font-face {
            font-family: "Arial";
            src: url("data:font/ttf;base64,{{ arial_font_base64 }}");
        }

        @font-face {
            font-family: "Arial";
            src: url("data:font/ttf;base64,{{ arial_bold_font_base64 }}");
            font-weight: bold;
        }

        body {
            font-family: "Arial", sans-serif;
            color: #1e293b;
            line-height: 1.4;
            font-size: 10pt;
        }

        .text-blue {
            color: #2563eb;
        }

        .text-slate {
            color: #64748b;
        }

        .text-black {
            color: #000000;
        }

        .font-bold {
            font-weight: bold;
        }

        .uppercase {
            text-transform: uppercase;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        .w-full {
            width: 100%;
        }

        .text-right {
            text-align: right;
        }

        .text-center {
            text-align: center;
        }

        .valign-top {
            vertical-align: top;
        }

        .valign-middle {
            vertical-align: middle;
        }

        .modern-status {
            background-color: #2563eb;
            color: white;
            text-align: center;
            padding: 5pt;
            margin-bottom: 20pt;
        }

        .items-table th {
            border-bottom: 2pt solid #e2e8f0;
            padding: 10pt 5pt;
            text-align: left;
            color: #64748b;
            font-size: 8pt;
            text-transform: uppercase;
        }

        .items-table td {
            padding: 12pt 5pt;
            border-bottom: 1pt solid #f1f5f9;
        }

        .qr-box {
            background-color: #f8fafc;
            border: 1pt solid #e2e8f0;
            padding: 10pt;
        }

        .minimal-amount {
            font-size: 24pt;
            font-weight: bold;
            color: #000;
        }
    </style>
</head>

<body>

    {% if theme == 'modern' %}
    <div class="modern-status">
        <span class="font-bold uppercase" style="font-size: 8pt; letter-spacing: 2pt;">
            {% if invoice.status == 'paid' %}BU FAKTURA ÖDƏNİLİB{% else %}ÖDƏNİŞ GÖZLƏNİLİR{% endif %}
        </span>
    </div>
    <table class="w-full">
        <tr>
            <td class="valign-top" style="width: 60%;">
                {% if business.logo %}<img src="{{ business.logo.url }}" style="height: 60pt; margin-bottom: 15pt;">{% endif %}
                <h2 class="uppercase font-bold text-black" style="margin: 0; font-size: 16pt;">{{ business.name }}</h2>
                <div class="text-slate" style="font-size: 10pt; margin-top: 5pt;">
                    {{ business.address|default:"" }}<br>
                    VÖEN: {{ business.voen|default:"" }}<br>
                    Tel: {{ business.phone|default:"" }}
                </div>
            </td>
            <td class="valign-top text-right" style="width: 40%;">
                <div class="text-slate uppercase font-bold" style="font-size: 8pt;">Müştəri</div>
                <div class="font-bold text-black" style="font-size: 12pt;">{{ client.name }}</div>
                <div class="text-slate" style="font-size: 9pt;">{{ client.email }}</div>
                <table style="margin-top: 20pt; width: 100%;">
                    <tr>
                        <td class="text-right">
                            <div class="text-slate uppercase font-bold" style="font-size: 8pt;">Tarix</div>
                            <div class="font-bold text-black">{{ invoice.invoice_date|date:"d.m.Y" }}</div>
                        </td>
                        <td class="text-right">
                            <div class="text-slate uppercase font-bold" style="font-size: 8pt;">Son Tarix</div>
                            <div class="font-bold text-black">{{ invoice.due_date|date:"d.m.Y" }}</div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    {% elif theme == 'classic' %}
    <div class="text-center" style="margin-bottom: 30pt;">
        <div style="border-bottom: 3pt solid #000; padding: 5pt 30pt; display: inline-block;">
            <h1 class="uppercase font-bold" style="margin: 0; font-size: 24pt; letter-spacing: 3pt;">HESAB-FAKTURA</h1>
        </div>
        <div class="text-slate font-bold uppercase" style="margin-top: 5pt; font-size: 9pt;">No: {{ invoice.invoice_number }}</div>
    </div>
    <table class="w-full">
        <tr>
            <td class="valign-top" style="border-left: 5pt solid #000; padding-left: 15pt; width: 50%;">
                <div class="text-slate uppercase font-bold" style="font-size: 7pt; margin-bottom: 5pt;">KİMƏ:</div>
                <div class="font-bold text-black" style="font-size: 14pt;">{{ client.name }}</div>
                <div class="text-slate" style="font-size: 9pt;">{{ client.address|default:client.email }}</div>
            </td>
            <td class="valign-top text-right" style="width: 50%;">
                <div class="font-bold text-black" style="font-size: 14pt;">{{ business.name }}</div>
                <div class="text-slate" style="font-size: 9pt;">VÖEN: {{ business.voen }}</div>
                <div class="text-slate" style="font-size: 9pt;">{{ business.email }}</div>
            </td>
        </tr>
    </table>

    {% elif theme == 'minimal' %}
    <table class="w-full" style="margin-bottom: 40pt;">
        <tr>
            <td class="valign-top">
                {% if business.logo %}<img src="{{ business.logo.url }}" style="height: 30pt;">{% endif %}
                <div class="text-slate font-bold" style="font-size: 8pt; margin-top: 5pt;">Invoice #{{ invoice.invoice_number }}</div>
            </td>
            <td class="valign-top text-right">
                <div class="minimal-amount">{{ invoice.total|floatformat:2 }} {{ currency_symbol }}</div>
                <div class="text-slate uppercase font-bold" style="font-size: 7pt;">{% if invoice.status == 'paid' %}ÖDƏNİLİB{% else %}ÖDƏNİŞ GÖZLƏNİLİR{% endif %}</div>
            </td>
        </tr>
    </table>
    {% endif %}

    <!-- Items -->
    <div style="margin-top: 30pt;">
        <table class="items-table">
            <thead>
                <tr>
                    <th style="width: 50%;">Məhsul / Xidmət</th>
                    <th class="text-center">Sayı</th>
                    <th class="text-right">Qiymət</th>
                    <th class="text-right">Məbləğ</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td class="text-black font-bold">{{ item.description }}</td>
                    <td class="text-center text-slate">{{ item.quantity|floatformat:-2 }} {{ item.unit }}</td>
                    <td class="text-right text-slate">{{ item.unit_price|floatformat:2 }} {{ currency_symbol }}</td>
                    <td class="text-right font-bold text-black">{{ item.amount|floatformat:2 }} {{ currency_symbol }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Totals and QR -->
    <table class="w-full" style="margin-top: 30pt;">
        <tr>
            <td class="valign-top" style="width: 60%;">
                <div class="text-slate uppercase font-bold" style="font-size: 8pt;">Qeyd</div>
                <div class="text-slate italic" style="font-size: 9pt; width: 80%; line-height: 1.5;">{{ invoice.notes|default:"Zəhmət olmasa vaxtında ödəniş edin." }}</div>
                {% if qr_code_base64 %}
                <div style="margin-top: 30pt; width: 250pt;">
                    <table class="qr-box">
                        <tr>
                            <td class="valign-middle" style="width: 100pt;"><img
                                    src="data:image/png;base64,{{ qr_code_base64 }}" style="width: 90pt; height: 90pt;">
                            </td>
                            <td class="valign-middle" style="padding-left: 15pt;">
                                <div class="font-bold text-black" style="font-size: 11pt;">Sürətli Ödəniş</div>
                                <div class="text-slate" style="font-size: 9pt; line-height: 1.4;">Mobil telefonla skan edərək dərhal ödəniş edin.</div>
                            </td>
                        </tr>
                    </table>
                </div>
                {% endif %}
            </td>
            <td class="valign-top" style="width: 40%;">
                <div style="border-top: 4pt solid #1e293b; padding-top: 10pt;">
                    <table class="w-full">
                        <tr>
                            <td class="text-slate">Cəm:</td>
                            <td class="text-right font-bold">{{ invoice.subtotal|floatformat:2 }} {{ currency_symbol }}</td>
                        </tr>
                        <tr>
                            <td class="text-slate">ƏDV (18%):</td>
                            <td class="text-right font-bold">{{ invoice.tax_amount|floatformat:2 }} {{ currency_symbol }}</td>
                        </tr>
                        <tr>
                            <td class="font-bold text-black" style="padding-top: 15pt; font-size: 14pt;">YEKUN:</td>
                            <td class="text-right font-bold text-blue" style="padding-top: 15pt; font-size: 14pt;">{{ invoice.total|floatformat:2 }} {{ currency_symbol }}</td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    {% if not has_white_label %}
    <div style="margin-top: 50pt; text-align: center; border-top: 1pt solid #f1f5f9; padding-top: 10pt;">
        <div style="font-size: 8pt; color: #94a3b8; font-weight: bold;">
            Powered by <span style="color: #1e293b;">InvoiceAZ</span>
        </div>
        <div style="font-size: 7pt; color: #cbd5e1; margin-top: 3pt;">Bütün Hüquqlar Qorunur © 2026</div>
    </div>
    {% endif %}
</body>

</html>